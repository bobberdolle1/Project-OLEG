# Telegram Bot Configuration
# https://t.me/BotFather для получения токена
TELEGRAM_BOT_TOKEN=YOUR_BOT_TOKEN_HERE

# ID владельца бота для полного доступа
# Узнать свой ID можно у @userinfobot или @getmyid_bot
OWNER_ID=YOUR_TELEGRAM_ID_HERE

# ============================================
# Ollama Configuration
# ============================================
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_TIMEOUT=120  # Увеличено для cloud моделей

# Cloud Models (Primary)
OLLAMA_BASE_MODEL=deepseek-v3.2:cloud  # Main Chat + Tools (Top tier, поддерживает tools)
OLLAMA_VISION_MODEL=qwen3-vl:235b-cloud  # Vision (cloud, топ качество)
OLLAMA_MEMORY_MODEL=gemma3:12b  # Локальная для RAG (без rate limits, 128k контекст)
OLLAMA_WEB_SEARCH_ENABLED=true

# Fallback Models (Local - GPU 10GB+)
OLLAMA_FALLBACK_ENABLED=true
OLLAMA_FALLBACK_MODEL=gemma3:12b  # Chat + Vision (Universal, 128k context)
OLLAMA_TOOL_MODEL=qwen3:8b  # Tools Only (Agent logic, function calling)
OLLAMA_FALLBACK_VISION_MODEL=gemma3:12b  # Native Vision
OLLAMA_FALLBACK_MEMORY_MODEL=gemma3:12b  # 128k context

# ============================================
# Web Search (Anti-Hallucination)
# ============================================
# Приоритет: SearXNG → Brave → DuckDuckGo
# Свой инстанс SearXNG: http://localhost:8080
SEARXNG_URL=
# Brave Search API (резерв, 2000/мес бесплатно): https://brave.com/search/api/
BRAVE_SEARCH_API_KEY=

# ============================================
# ChromaDB (RAG - "Мозг Олега")
# ============================================
CHROMADB_HOST=chromadb  # Для Docker, пусто для локального
CHROMADB_PORT=8000
CHROMADB_PERSIST_DIR=./data/chroma
CHROMADB_COLLECTION_NAME=oleg_kb
# ВАЖНО: nomic-embed-text лучше для русского чем MiniLM!
# ollama pull nomic-embed-text
EMBEDDING_MODEL=nomic-embed-text
SIMILARITY_THRESHOLD=0.65  # Снижено для лучшего recall

# ============================================
# Database
# ============================================
DATABASE_URL=sqlite+aiosqlite:///./data/oleg.db
# PostgreSQL для продакшена:
# DATABASE_URL=postgresql+asyncpg://oleg:changeme@localhost:5432/oleg_db


# ============================================
# Redis (для продакшена)
# ============================================
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=15  # 10 маловато для активного диалога
RATE_LIMIT_WINDOW=60

# ============================================
# Antispam (лимит запросов к боту)
# ============================================
ANTISPAM_ENABLED=true
ANTISPAM_BURST=5      # 5 запросов/минуту (защита от спама)
ANTISPAM_HOURLY=50    # 50 запросов/час (owner без лимита)

# ============================================
# Toxicity & Moderation
# ============================================
TOXICITY_ANALYSIS_ENABLED=true
TOXICITY_THRESHOLD=75

# ============================================
# System
# ============================================
TIMEZONE=Europe/Moscow
LOG_LEVEL=INFO
LOG_FILE=logs/oleg.log
METRICS_ENABLED=false
METRICS_PORT=9090

# ============================================
# Media & Voice
# ============================================
VOICE_RECOGNITION_ENABLED=true
# base - быстро качается, small - лучше для русского (но большой), turbo - если есть GPU
WHISPER_MODEL=base
HUGGINGFACE_MIRROR=https://hf-mirror.com  # Зеркало для РФ
CONTENT_DOWNLOAD_ENABLED=true
