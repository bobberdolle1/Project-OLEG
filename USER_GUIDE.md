# Руководство пользователя бота "Олег" (Версия 3.0)

## Обзор

"Олег" — это многофункциональный ИИ-ассистент и развлекательный бот для Telegram-чата с уникальной личностью, функциями модерации, автоматической генерацией контента и игровыми механиками. Бот использует ИИ для генерации ответов в характере грубоватого, но полезного персонажа по имени Олег.

## Новые возможности в версии 3.0

### 1. Система "Plug & Play"
- Бот автоматически настраивается при добавлении в новый чат
- Не требуется ручная настройка через веб-панель
- Автоматическое определение типа чата и настройка промпта

### 2. Умное приветствие пользователей
- При добавлении в чат, бот автоматически удаляет системные сообщения
- Приветствует новых участников с индивидуальным подходом
- Включает систему подтверждения "Я не бот" с киком за неактивность

### 3. Мозг Олега (RAG)
- Хранение знаний о пользователях и правилах чата в векторной базе данных
- Использование ChromaDB для контекстного поиска
- Память о фактах, упоминаниях и важной информации

### 4. Модуль зрения
- Анализ изображений, отправленных в чат
- Использование мультимодальной модели ИИ для описания содержимого
- Ответы на вопросы по скриншотам, схемам и другим изображениям

### 5. Рандомные ответы
- Бот периодически вставляет реплики в чат без прямого вызова
- Ответы генерируются в стиле Олега на основе контекста чата
- Возможность включения/выключения через команду `/random_toggle`

### 6. Администрирование через личные сообщения
- Полноценная админ-панель доступна через личные сообщения с ботом
- Команда `/admin` открывает интерактивное меню управления
- Управление чатами, админами, черным списком и настройками

## Основные команды

### Игровые команды
- `/grow [комментарий]` — Вырастить "пиписю" (таймер 12-24 часа)
- `/top` — Таблица лидеров
- `/pvp @username` — Вызов на дуэль
- `/casino [ставка]` — Игра в казино

### Команды модерации (только для админов)
- `олег бан @username [время] [причина]` — Блокировка пользователя
- `олег мут @username [время] [причина]` — Мут пользователя
- `олег кик @username [причина]` — Исключение пользователя

### Команды управления (в личных сообщениях с ботом)
- `/admin` — Открыть админ-панель
- `/setup` — Настроить новый чат (если бот в нем админ)
- `/chats` — Управление подключенными чатами
- `/admins` — Управление админами
- `/blacklist` — Управление черным списком
- `/random_toggle` — Включить/выключить рандомные ответы

### Команды генерации контента
- `/q [reply]` — Создать цитату из сообщения (в ответ на сообщение)
- `/qs [reply]` — Добавить цитату в стикерпак
- `/qd [стикер]` — Удалить стикер из стикерпака (только для админов)

## Администрирование через личные сообщения

### Доступ к админ-панели
1. Напишите боту в личные сообщения команду `/admin`
2. Убедитесь, что вы являетесь суперадминистратором (ID должен быть в списке SUPER_ADMINS)
3. Используйте интерактивные кнопки для навигации по панели управления

### Управление чатами
- Просмотр списка подключенных чатов
- Настройка индивидуального промпта для каждого чата
- Изменение режимов модерации
- Просмотр статистики по каждому чату

### Управление админами
- Добавление/удаление администраторов через команды `/add_admin` и `/remove_admin`
- Назначение ролей (владелец/модератор)
- Просмотр текущего списка администраторов

### Черный список
- Блокировка/разблокировка пользователей через команды `/block_user` и `/unblock_user`
- Возможность локального и глобального бана
- Просмотр списка заблокированных пользователей

## Режимы модерации

Бот поддерживает три режима модерации, которые можно настроить для каждого чата:

1. **Лайт** - только защита от рейдов
2. **Норма** - автоматический мут за флуд и спам ссылками
3. **Диктатура** - жесткая автоматическая модерация, строгие правила

## Интеграция с ИИ

Бот использует локальную модель Ollama (qwen2-vl:2b-instruct-q5_1) для:
- Генерации ответов в стиле Олега
- Анализа изображений
- Обработки естественного языка
- Контекстного поиска в памяти

## Безопасность и защита

- Защита от промпт-инъекций
- Антиспам-фильтр
- Черный список пользователей
- Фильтрация токсичных сообщений

## Поддержка

Если у вас возникли проблемы с ботом или предложения по улучшению:
1. Проверьте, обновлена ли у вас последняя версия
2. Убедитесь, что бот имеет права администратора в чате
3. Обратитесь в личные сообщения к боту с описанием проблемы