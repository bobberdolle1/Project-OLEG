"""Help command handler."""

import logging
from aiogram import Router
from aiogram.filters import Command
from aiogram.types import Message

logger = logging.getLogger(__name__)

router = Router()


HELP_TEXT_TEMPLATE = """
ü§ñ <b>–û–ª–µ–≥ ‚Äî –¢–≤–æ–π —Ü–∏—Ñ—Ä–æ–≤–æ–π –≥–∏–≥–∞—á–∞–¥</b>

<b>üìã –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>

<b>–ò–≥—Ä—ã:</b>
/grow ‚Äî –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä (–∫—É–ª–¥–∞—É–Ω 12-24—á)
/top ‚Äî –¢–æ–ø-10 –∏–≥—Ä–æ–∫–æ–≤ –ø–æ —Ä–∞–∑–º–µ—Ä—É
/top_rep ‚Äî –¢–æ–ø-10 –ø–æ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏
/profile ‚Äî –¢–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
/pvp @username ‚Äî –î—É—ç–ª—å —Å –¥—Ä—É–≥–∏–º –∏–≥—Ä–æ–∫–æ–º
/casino [—Å—Ç–∞–≤–∫–∞] ‚Äî –°–ª–æ—Ç—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10 –º–æ–Ω–µ—Ç)

<b>–ì–∏–ª—å–¥–∏–∏:</b>
/create_guild [–Ω–∞–∑–≤–∞–Ω–∏–µ] ‚Äî –°–æ–∑–¥–∞—Ç—å –≥–∏–ª—å–¥–∏—é
/join_guild [–Ω–∞–∑–≤–∞–Ω–∏–µ] ‚Äî –í—Å—Ç—É–ø–∏—Ç—å –≤ –≥–∏–ª—å–¥–∏—é
/leave_guild ‚Äî –ü–æ–∫–∏–Ω—É—Ç—å –≥–∏–ª—å–¥–∏—é
/guild_info ‚Äî –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–≤–æ–µ–π –≥–∏–ª—å–¥–∏–∏
/guild_war @–≥–∏–ª—å–¥–∏—è [—á–∞—Å—ã] ‚Äî –û–±—ä—è–≤–∏—Ç—å –≤–æ–π–Ω—É

<b>–î—É—ç—Ç—ã:</b>
/create_duo @–ø–∞—Ä—Ç–Ω–µ—Ä ‚Äî –°–æ–∑–¥–∞—Ç—å –¥—É—ç—Ç
/duo_stats ‚Äî –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥—É—ç—Ç–∞
/duo_pvp @–¥—É—ç—Ç ‚Äî –î—É—ç–ª—å –¥—É—ç—Ç–æ–≤

<b>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –∫–≤–µ—Å—Ç—ã:</b>
/achievements ‚Äî –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
/my_achievements ‚Äî –¢–≤–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
/quests ‚Äî –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–≤–µ—Å—Ç—ã
/quest_progress ‚Äî –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–≤–µ—Å—Ç–∞–º

<b>–ú–æ–¥–µ—Ä–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤):</b>
–æ–ª–µ–≥ –±–∞–Ω @user [–≤—Ä–µ–º—è] [–ø—Ä–∏—á–∏–Ω–∞]
–æ–ª–µ–≥ –º—É—Ç @user [–≤—Ä–µ–º—è] [–ø—Ä–∏—á–∏–Ω–∞]
–æ–ª–µ–≥ –∫–∏–∫ @user [–ø—Ä–∏—á–∏–Ω–∞]
–æ–ª–µ–≥ —Ä–µ–∂–∏–º [light|normal|dictatorship]
/warn ‚Äî –í—ã–¥–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
/unwarn ‚Äî –°–Ω—è—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
/strikes ‚Äî –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

<b>–î—Ä—É–≥–æ–µ:</b>
/start ‚Äî –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
/help ‚Äî –≠—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞
/myhistory ‚Äî –ò—Å—Ç–æ—Ä–∏—è —Ç–≤–æ–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
/reset ‚Äî –°–±—Ä–æ—Å–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç (—Ç–æ–ª—å–∫–æ –≤ –õ–°)

<b>üí¨ Q&A:</b>
–£–ø–æ–º—è–Ω–∏ –º–µ–Ω—è ({bot_username}) –∏–ª–∏ –æ—Ç–≤–µ—Ç—å –Ω–∞ –º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî —è –æ—Ç–≤–µ—á—É!

<b>üìä –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:</b>
‚Ä¢ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø–µ—Ä–µ—Å–∫–∞–∑ —á–∞—Ç–∞ (08:00 –ú–°–ö)
‚Ä¢ –ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (20:00 –ú–°–ö)
‚Ä¢ –ê–Ω—Ç–∏—Ä–∞–∏–¥ –∑–∞—â–∏—Ç–∞
‚Ä¢ –ê–Ω–∞–ª–∏–∑ —Ç–æ–∫—Å–∏—á–Ω–æ—Å—Ç–∏
‚Ä¢ –°–ø–∞–º-—Ñ–∏–ª—å—Ç—Ä

<b>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞:</b>
–ù–∞–ø–∏—à–∏ –º–Ω–µ –≤ –ª–∏—á–∫—É /start –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

<i>–Ø –∂–∏–≤—É –≤ —ç—Ç–æ–º —á–∞—Ç–µ. –≠—Ç–æ –º–æ—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è. –Ø –∑–¥–µ—Å—å –∑–∞–∫–æ–Ω.</i>
"""


@router.message(Command("help"))
async def cmd_help(msg: Message):
    """
    –ö–æ–º–∞–Ω–¥–∞ /help ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –∫–æ–º–∞–Ω–¥–∞–º.
    
    Args:
        msg: –í—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    """
    bot_username = f"@{msg.bot._me.username}" if msg.bot._me and msg.bot._me.username else "@bot"
    help_text = HELP_TEXT_TEMPLATE.format(bot_username=bot_username)
    await msg.reply(help_text, parse_mode="HTML")
    logger.info(f"Help requested by @{msg.from_user.username or msg.from_user.id}")
